!function(i,c){var n={default:"复制",success:"复制成功",fail:"复制失败"};function o(e,t){this.el=document.createElement("span"),this.el.innerText=n.default,this.el.setAttribute("class","copy-btn"),this.el.style.top=e+"px",this.el.style.right=t+"px"}o.prototype={getEl:function(){return this.el},changeStatus:function(e){this.el.innerText=n.success,e||(this.el.innerText=n.fail,this.el.style.color="#dd524d"),this.reset(800)},reset:function(e){var t=this;setTimeout(function(){t.el.innerText=n.default,t.el.style.color=""},e)}};var s,t,l=10,a=i(".highlight");function r(e){return i(e).offset().top}function u(e){return i(t).width()-e.outerWidth(!0)-e.offset().left}function e(){a.each(function(){var e=i(this),t=r(e)+l,n=u(e)+l,e=e.find(".code pre")[0],t=new o(t,n),n=t.getEl();n.addEventListener("click",function(e,t){try{var n=document.createRange();n.selectNode(e),c.getSelection().removeAllRanges(),c.getSelection().addRange(n),document.execCommand("copy"),c.getSelection().removeAllRanges(),t.changeStatus(1)}catch(e){t.changeStatus(0)}}.bind(this,e,t)),s.appendChild(n)}),i(t).append(s)}a&&a.length&&(s=document.createDocumentFragment(),t=".content",c.addEventListener("load",function(){e()}),c.addEventListener("resize",function(){var e=i(".copy-btn");e.length&&e.each(function(e){var t=i(a[e]),e=r(t)+l,t=u(t)+l;i(this).css({top:e,right:t})})}))}(jQuery,window);