var searchFunc=function(e,r,c){"use strict";var i="<button type='button' class='local-search-close' id='local-search-close'></button>";$.ajax({url:e,dataType:"xml",success:function(e){var t=document.createElement("div"),n=$("entry",e).map(function(){return t.innerHTML=$("content",this).text(),{title:$("title",this).text(),content:t.innerHTML,url:$("url",this).text()}}).get(),e=document.getElementById(r),l=document.getElementById(c);e.addEventListener("input",function(){var u='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s]+/);if(l.innerHTML="",!(this.value.trim().length<=0)){if(n.forEach(function(e){var n=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var l,t,r,c=e.title.trim().toLowerCase(),i=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),s=e.url,a=-1,o=-1;""!==i?h.forEach(function(e,t){l=c.indexOf(e),a=i.indexOf(e),l<0&&a<0?n=!1:(a<0&&(a=0),0==t&&(o=a))}):n=!1,n&&(u+="<li><a href='"+s+"' class='search-result-title'>"+c+"</a>",t=e.content.trim().replace(/<[^>]+>/g,""),0<=o&&(s=o+80,(s=0==(e=(e=o-20)<0?0:e)?100:s)>t.length&&(s=t.length),r=t.substr(e,s),h.forEach(function(e){var t=new RegExp(e,"gi");r=r.replace(t,'<em class="search-keyword">'+e+"</em>")}),u+='<p class="search-result">'+r+"...</p>"),u+="</li>")}),-1===(u+="</ul>").indexOf("<li>"))return l.innerHTML=i+'<div class="search-result-empty"><p><i class="fe fe-tired"></i> 没有找到内容，更换下搜索词试试吧~<p></div>';l.innerHTML=i+u}})}}),$(document).on("click","#local-search-close",function(){$("#local-search-input").val(""),$("#local-search-result").html("")})};