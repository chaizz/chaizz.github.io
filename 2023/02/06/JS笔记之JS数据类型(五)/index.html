<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹(äº”) |
    
    ç”±æ¥åŒä¸€æ¢¦</title>
  
  <link rel="shortcut icon" href="/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<script src="/js/pace.min.js"></script>

<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <main class="content">
    <section class="outer">
  <article id="post-JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹(äº”)" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
      

<h1 class="article-title" itemprop="name">
  JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹(äº”)
</h1>



    </header>
    

    
    <div class="article-meta">
      <a href="/2023/02/06/JS%E7%AC%94%E8%AE%B0%E4%B9%8BJS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B(%E4%BA%94)/" class="article-date">
  <time datetime="2023-02-06T07:38:59.000Z" itemprop="datePublished">2023-02-06</time>
</a>
      
      &emsp;<i class="fe fe-bar-chart"></i> <span class="post-count">2k</span>å­—
      &emsp;<i class="fe fe-clock"></i> <span class="post-count">8</span>åˆ†é’Ÿ
    </div>
    

    
    
<div class="tocbot"></div>

    

    <div class="article-entry" itemprop="articleBody">
      
      
<div class="article-gallery">
  <div class="article-gallery-photos">
    
    
    <img src="https://tc.chaizz.com/ec55444c4a1211edac740242ac190002.png" itemprop="image">
    
    
  </div>
</div>

      
      <p>â€‹                    </p>
<a id="more"></a>

<h1 id="JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹-äº”"><a href="#JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹-äº”" class="headerlink" title="JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹(äº”)"></a>JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹(äº”)</h1><h2 id="1-Map"><a href="#1-Map" class="headerlink" title="1 Map"></a>1 Map</h2><p>map æ˜¯ä¸€ä¸ªå¸¦é”®çš„æ•°æ®é¡¹çš„é›†åˆï¼Œä»–å’Œobjectå¾ˆåƒï¼Œ ä½†æ˜¯mapå…è®¸ä»»æ„ç±»å‹çš„é”®ï¼Œè€Œå¯¹è±¡çš„é”®åªèƒ½æ˜¯ å­—ç¬¦ä¸²å’Œsymbolï¼Œä¸ç®¡ç”¨ä»€ä¹ˆå½“åšå¯¹è±¡çš„keyï¼ˆé™¤äº†symbolï¼‰ï¼Œéƒ½ä¼šè¢«jsè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚</p>
<h3 id="1-1-æ–¹æ³•"><a href="#1-1-æ–¹æ³•" class="headerlink" title="1.1 æ–¹æ³•"></a>1.1 æ–¹æ³•</h3><ul>
<li>new Map() ï¼šåˆ›å»ºä¸€ä¸ªmapã€‚</li>
<li>map.set(key, value)ï¼šæ ¹æ®é”®è®¾ç½®å€¼ã€‚mapåœ¨åˆ›å»ºæ—¶ä¿ç•™äº†å€¼æ’å…¥çš„é¡ºåºã€‚</li>
<li>map.get(key)ï¼šæ ¹æ®é”®æ¥è¿”å›å€¼ï¼Œå¦‚æœä¸å­˜åœ¨keyï¼Œåˆ™è¿”å›undefinedã€‚</li>
<li>map.has(key)ï¼šå¦‚æœkeyå­˜åœ¨è¿”å›trueï¼Œä¸å­˜åœ¨è¿”å›falseã€‚</li>
<li>map.delete(key)ï¼šåˆ é™¤æŒ‡å®šçš„keyã€‚</li>
<li>map.clear()ï¼šæ¸…ç©ºmapã€‚</li>
<li>map.sizeï¼šè¿”å›å½“å‰å…ƒç´ çš„ä¸ªæ•°ã€‚</li>
</ul>
<p>åœ¨ä½¿ç”¨mapè·å–keyçš„å€¼æˆ–è€…è®¾ç½®å€¼æ—¶ åº”è¯¥ä½¿ç”¨ map.get() æˆ–è€… map.set() ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line">map.set(<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;str1&#x27;</span>);   <span class="comment">// å­—ç¬¦ä¸²é”®</span></span><br><span class="line">map.set(<span class="number">1</span>, <span class="string">&#x27;num1&#x27;</span>);     <span class="comment">// æ•°å­—é”®</span></span><br><span class="line">map.set(<span class="literal">true</span>, <span class="string">&#x27;bool1&#x27;</span>); <span class="comment">// å¸ƒå°”å€¼é”®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Map åˆ™ä¼šä¿ç•™é”®çš„ç±»å‹ï¼Œæ‰€ä»¥ä¸‹é¢è¿™ä¸¤ä¸ªç»“æœä¸åŒï¼š</span></span><br><span class="line">alert( map.get(<span class="number">1</span>)   ); <span class="comment">// &#x27;num1&#x27;</span></span><br><span class="line">alert( map.get(<span class="string">&#x27;1&#x27;</span>) ); <span class="comment">// &#x27;str1&#x27;</span></span><br><span class="line"></span><br><span class="line">alert( map.size ); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// map ä½¿ç”¨å¯¹è±¡ä½œä¸ºkey</span></span><br><span class="line"><span class="keyword">let</span> username = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;john&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> visitsCountMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">visitsCountMap.set(<span class="string">&#x27;john&#x27;</span>, <span class="number">123</span>)</span><br></pre></td></tr></table></figure>
<p>mapæ¯”è¾ƒé”®çš„æ–¹æ³•ï¼šä½¿ç”¨sameValueZeroç®—æ³•æ¥æ¯”è¾ƒé”®æ˜¯å¦ç›¸ç­‰ï¼Œä»–å’Œä¸¥æ ¼ç­‰äº === å·®ä¸å¤šï¼Œä½†åŒºåˆ«æ˜¯ NaNæ˜¯ç­‰äºNaNçš„ï¼Œæ‰€ä»¥NaNä¹Ÿå¯ä»¥è¢«ç”¨ä½œé”®ã€‚</p>
<p>map åœ¨è®¾ç½®keyçš„æ—¶å€™è¿”å›çš„æ˜¯ä»–è‡ªèº«ï¼Œæ‰€ä»¥å¯ä»¥è¢«é“¾å¼è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mapObj = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">mapObj.set(<span class="string">&#x27;name&#x27;</span>, â€˜å¼ ä¸‰).set(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>).set(<span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;m&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="1-2-Map-è¿­ä»£"><a href="#1-2-Map-è¿­ä»£" class="headerlink" title="1.2 Map è¿­ä»£"></a>1.2 Map è¿­ä»£</h3><p>åœ¨mapé‡Œé¢å¾ªç¯å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><p>map.keys() éå†å¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰é”®çš„å¯è¿­ä»£å¯¹è±¡ã€‚</p>
</li>
<li><p>map.values() éå†å¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å€¼çš„å¯è¿­ä»£å¯¹è±¡ã€‚</p>
</li>
<li><p>map.entries() éå†å¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å®ä½“ [key, value] çš„å¯è¿­ä»£å¯¹è±¡ï¼Œforâ€¦of åœ¨é»˜è®¤æƒ…å†µä¸‹æ‰ å°±æ˜¯ä½¿ç”¨çš„æ­¤æ–¹æ³•ã€‚</p>
</li>
<li><p>map.forEach()  å’Œæ•°ç»„ä¸€æ ·ï¼Œå¯¹æ¯ä¸ªé”®å€¼å¯¹æ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹æ¯ä¸ªé”®å€¼å¯¹ (key, value) è¿è¡Œ forEach å‡½æ•°</span></span><br><span class="line">recipeMap.forEach( <span class="function">(<span class="params">value, key, map</span>) =&gt;</span> &#123;</span><br><span class="line">  alert(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>); <span class="comment">// cucumber: 500 etc</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="1-3-å°†å¯¹è±¡è½¬åŒ–ä¸ºMap-gt-Object-entries"><a href="#1-3-å°†å¯¹è±¡è½¬åŒ–ä¸ºMap-gt-Object-entries" class="headerlink" title="1.3 å°†å¯¹è±¡è½¬åŒ–ä¸ºMap -&gt; Object.entries"></a>1.3 å°†å¯¹è±¡è½¬åŒ–ä¸ºMap -&gt; Object.entries</h3><p>å½“new ä¸€ä¸ªMap() å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¸¦é”®å€¼å¯¹çš„æ•°ç»„ï¼ˆæˆ–è€…å…¶ä»–çš„å¯è¿­ä»£å¯¹è±¡ï¼‰è¿›è¡Œåˆå§‹åŒ–ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”®å€¼å¯¹ [key, value] æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&#x27;1&#x27;</span>,  <span class="string">&#x27;str1&#x27;</span>],</span><br><span class="line">  [<span class="number">1</span>,    <span class="string">&#x27;num1&#x27;</span>],</span><br><span class="line">  [<span class="literal">true</span>, <span class="string">&#x27;bool1&#x27;</span>]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">alert( map.get(<span class="string">&#x27;1&#x27;</span>) ); <span class="comment">// str1</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨æ™®é€šçš„å¯¹è±¡æ¥åˆ›å»ºmapï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…å»ºæ–¹æ³• Object.entries(obj)ï¼Œè¯¥æ–¹æ³•è¿”å›å¯¹è±¡çš„é”®å€¼å¯¹æ•°ç»„ã€‚</p>
<h3 id="1-4-å°†Mapè½¬åŒ–ä¸ºå»ºå¯¹è±¡-Object-fromEntries-obj"><a href="#1-4-å°†Mapè½¬åŒ–ä¸ºå»ºå¯¹è±¡-Object-fromEntries-obj" class="headerlink" title="1.4 å°†Mapè½¬åŒ–ä¸ºå»ºå¯¹è±¡ Object.fromEntries(obj)"></a>1.4 å°†Mapè½¬åŒ–ä¸ºå»ºå¯¹è±¡ Object.fromEntries(obj)</h3><p>å®ƒä¸ Object.entries(obj)æ˜¯ç›¸åçš„ï¼Œç»™å®šä¸€ä¸ªå…·æœ‰[key, value] çš„æ•°ç»„ï¼Œä»–ä¼šæ ¹æ®æ•°ç»„åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> prices = <span class="built_in">Object</span>.fromEntries([</span><br><span class="line">  [<span class="string">&#x27;banana&#x27;</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">&#x27;orange&#x27;</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="string">&#x27;meat&#x27;</span>, <span class="number">4</span>]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨ prices = &#123; banana: 1, orange: 2, meat: 4 &#125;</span></span><br><span class="line">alert(prices.orange); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ å°†ä¸€ä¸ªmapçš„æ•°ç»„è½¬åŒ–ä¸ºä¸€ä¸ªæ™®é€šå¯¹è±¡ä¼ è¾“ç»™ç¬¬ä¸‰æ–¹çš„æ¥å£</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Object</span>.fromEntries(map)</span><br></pre></td></tr></table></figure>
<h2 id="2-set"><a href="#2-set" class="headerlink" title="2 set"></a>2 set</h2><p>set æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹é›†åˆ â€“ å€¼çš„é›†åˆï¼Œä»–æ²¡æœ‰é”®ï¼Œè€Œä¸”ä»–çš„å€¼åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</p>
<h3 id="2-1-æ–¹æ³•"><a href="#2-1-æ–¹æ³•" class="headerlink" title="2.1 æ–¹æ³•"></a>2.1 æ–¹æ³•</h3><ul>
<li>new Set(iterable)ï¼š  åˆ›å»ºä¸€ä¸ªsetï¼Œå¦‚æœæä¾›äº†ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯æ•°ç»„ï¼‰ï¼Œå°†ä¼šä»æ•°ç»„é‡Œé¢å¤åˆ¶åˆ°setä¸­ã€‚æœ‰é‡å¤çš„å€¼ï¼Œè‡ªåŠ¨åˆ é™¤ã€‚</li>
<li>set.add(value)ï¼šæ·»åŠ ä¸€ä¸ªå€¼è¿”å›set æœ¬èº«ï¼Œå¯ä»¥åƒmapé‚£æ ·é“¾å¼è°ƒç”¨ã€‚</li>
<li>set.delete(value)ï¼š åˆ é™¤å€¼ï¼Œå­˜åœ¨è¿”å›trueï¼Œä¸å­˜åœ¨è¿”å›falseã€‚</li>
<li>set.has(value)ï¼šå¦‚æœvalueåœ¨setä¸­ï¼Œè¿”å›trueï¼Œä¸åœ¨è¿”å›falseã€‚</li>
<li>set.clear()ï¼šæ¸…ç©ºsetã€‚</li>
<li>set.sizeï¼šè¿”å›å½“å‰å…ƒç´ çš„ä¸ªæ•°ã€‚</li>
</ul>
<h3 id="2-2-set-è¿­ä»£"><a href="#2-2-set-è¿­ä»£" class="headerlink" title="2.2 set è¿­ä»£"></a>2.2 set è¿­ä»£</h3><p>å¯ä»¥ä½¿ç”¨forâ€¦of æˆ–è€… forEach æ¥è¿­ä»£set</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;oranges&quot;</span>, <span class="string">&quot;apples&quot;</span>, <span class="string">&quot;bananas&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> set) alert(value);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ forEach ç›¸åŒï¼š</span></span><br><span class="line">set.forEach(<span class="function">(<span class="params">value, valueAgain, set</span>) =&gt;</span> &#123;</span><br><span class="line">  alert(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>åœ¨forEachçš„å›è°ƒå‡½æ•°ä¸­æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œ ä¸€ä¸ªæ˜¯valueï¼Œå¦ä¸€ä¸ªä¹Ÿæ˜¯ valueï¼Œæœ€åæ˜¯ç›®æ ‡å¯¹è±¡ã€‚</p>
<p><strong>åœ¨mapä¸­çš„è¿­ä»£æ–¹æ³•åœ¨setä¸­åŒæ ·é€‚ç”¨ã€‚</strong></p>
<h2 id="3-WeakMap"><a href="#3-WeakMap" class="headerlink" title="3 WeakMap"></a>3 WeakMap</h2><p>åœ¨JSä¸­ æ•°ç»„æˆ–è€…å¯¹è±¡ä¸­çš„key æˆ–è€…valueï¼Œä»–ä»¬éƒ½æ˜¯è®¤ä¸ºæ˜¯å¯è¾¾çš„ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡è¢«ä¼ å…¥æ•°ç»„ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¤ä¸ºå¦‚æœè¿™ä¸ªæ•°ç»„å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¹Ÿä¸€å®šæ˜¯å¯è¾¾çš„ã€‚åœ¨ map ä¸­çš„ keyæˆ–è€…æ˜¯value ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚</p>
<p>JSåƒåœ¾å›æ”¶ä¸­JSå¼•æ“åœ¨å€¼å¯è¾¾å’Œè¢«å¯èƒ½å¼•ç”¨çš„æ—¶å€™ï¼Œä¼šå°†å€¼ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> john = &#123; <span class="attr">name</span>: <span class="string">&quot;John&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯¥å¯¹è±¡èƒ½è¢«è®¿é—®ï¼Œjohn æ˜¯å®ƒçš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦†ç›–å¼•ç”¨</span></span><br><span class="line">john = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯¥å¯¹è±¡å°†ä¼šè¢«ä»å†…å­˜ä¸­æ¸…é™¤</span></span><br></pre></td></tr></table></figure>
<p>å½“æŸä¸ªå¯¹è±¡ä½œä¸ºmapçš„é”®çš„æ—¶å€™ï¼Œ æˆ‘ä»¬ä¹Ÿè®¤ä¸ºæ”¹å¯¹è±¡æ˜¯å¯è¾¾çš„ï¼Œä»–ä¼šå ç”¨å†…å­˜ï¼Œä¸”ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> john = &#123; <span class="attr">name</span>: <span class="string">&quot;John&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(john, <span class="string">&quot;...&quot;</span>);</span><br><span class="line"></span><br><span class="line">john = <span class="literal">null</span>; <span class="comment">// è¦†ç›–å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// john è¢«å­˜å‚¨åœ¨äº† map ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ map.keys() æ¥è·å–å®ƒï¼Œæ‰€ä»¥ä»–ä¸ä¼šè¢«åƒåœ¾å›æ”¶</span></span><br></pre></td></tr></table></figure>
<p>WeakMap å’Œ Map çš„åŒºåˆ«</p>
<ul>
<li>åœ¨é”®ä¸Šçš„åŒºåˆ«<ul>
<li>WeakMap  çš„é”®å¿…é¡»æ˜¯å¯¹è±¡ï¼Œä¸èƒ½æ˜¯åŸå§‹å€¼ã€‚</li>
</ul>
</li>
<li>æ–¹æ³•ä¸Šçš„åŒºåˆ«<ul>
<li>åªæ”¯æŒ has()  get () set() delete() æ–¹æ³•ï¼Œ ä¸æ”¯æŒ keys() values() entries()</li>
<li>ä¸èƒ½è¿­ä»£ã€‚</li>
</ul>
</li>
</ul>
<p>WeakMap  çš„ä½¿ç”¨åœºæ™¯ä¸»è¦çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<p><strong>é¢å¤–æ•°æ®çš„å­˜å‚¨</strong>ã€‚</p>
<blockquote>
<p>å‡å¦‚è¦å¤„ç†å¦ä¸€äº›ä»£ç çš„æ•°æ®ï¼Œæˆ–è€…æ˜¯ç¬¬ä¸‰æ–¹åº“çš„æ•°æ®å¹¶ä¸”è¦å­˜å‚¨ä¸€äº›ç›¸å…³çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™æ—¶å€™è¿™äº›æ•°æ®å°±åº”è¯¥å’Œè¿™ä¸ªå¯¹è±¡å…±å­˜äº¡ã€‚å°†è¿™äº›æ•°æ®å­˜å‚¨åˆ°WeakMap ä¸­ï¼Œå¹¶ä½¿ç”¨è¯¥å¯¹è±¡ä½œä¸ºè¿™äº›æ•°æ®çš„é”®ï¼Œå½“æ”¹å¯¹è±¡å¯¹åƒåœ¾å›æ”¶åï¼Œè¿™äº›æ•°æ®ä¹Ÿä¼šè¢«å›æ”¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> weakMap = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="comment">// å¦‚æœ john</span></span><br><span class="line">weakMap.set(john, <span class="string">&#x27;some data&#x27;</span>);</span><br></pre></td></tr></table></figure>


</blockquote>
<p><strong>åšæ•°æ®ç¼“å­˜</strong></p>
<blockquote>
<p> å¯ä»¥ç¼“å­˜å‡½æ•°è¿”å›çš„ç»“æœï¼Œä¸€éå¤šæ¬¡ç”µæ³³ä¸éœ€è¦é‡æ–°è®¡ç®—ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cache = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—å¹¶è®°ç»“æœ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!cache.has(obj)) &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="comment">/* calculate the result for */</span> obj;</span><br><span class="line">    cache.set(obj, result);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cache.get(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ“ main.js</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;<span class="comment">/* some object */</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result1 = process(obj);</span><br><span class="line"><span class="keyword">let</span> result2 = process(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// â€¦â€¦ç¨åï¼Œæˆ‘ä»¬ä¸å†éœ€è¦è¿™ä¸ªå¯¹è±¡æ—¶ï¼š</span></span><br><span class="line">obj = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ— æ³•è·å– cache.sizeï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ª WeakMapï¼Œ</span></span><br><span class="line"><span class="comment">// è¦ä¹ˆæ˜¯ 0ï¼Œæˆ–å³å°†å˜ä¸º 0</span></span><br><span class="line"><span class="comment">// å½“ obj è¢«åƒåœ¾å›æ”¶ï¼Œç¼“å­˜çš„æ•°æ®ä¹Ÿä¼šè¢«æ¸…é™¤</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h2 id="4-WeakSet"><a href="#4-WeakSet" class="headerlink" title="4 WeakSet"></a>4 WeakSet</h2><p>WeakSet å’Œ Set çš„åŒºåˆ«</p>
<ul>
<li>WeakSet çš„å…ƒç´ åªèƒ½æ˜¯å¯¹è±¡ã€‚</li>
<li>å¯¹è±¡åªæœ‰åœ¨å…¶ä»–æŸä¸ªåœ°æ–¹èƒ½è¢«è®¿é—®çš„æ—¶å€™ï¼Œå†èƒ½å…­åœ¨ WeakSetä¸­ã€‚</li>
<li>åªæ”¯æŒadd() has() delete() ä¸æ”¯æŒsizeå’Œ keys() ï¼Œå¹¶ä¸”ä¸å¯è¿­ä»£ã€‚</li>
</ul>
<p>weakSetä¹Ÿå¯ä»¥ä½œä¸ºé¢å¤–çš„ç©ºé—´ï¼Œä½†æ˜¯åªèƒ½æ˜¯é’ˆå¯¹<strong>æ˜¯/å¦</strong>çš„äº‹å®ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> visitedSet = <span class="keyword">new</span> <span class="built_in">WeakSet</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> john = &#123; <span class="attr">name</span>: <span class="string">&quot;John&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> pete = &#123; <span class="attr">name</span>: <span class="string">&quot;Pete&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> mary = &#123; <span class="attr">name</span>: <span class="string">&quot;Mary&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">visitedSet.add(john); <span class="comment">// John è®¿é—®äº†æˆ‘ä»¬</span></span><br><span class="line">visitedSet.add(pete); <span class="comment">// ç„¶åæ˜¯ Pete</span></span><br><span class="line">visitedSet.add(john); <span class="comment">// John å†æ¬¡è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// visitedSet ç°åœ¨æœ‰ä¸¤ä¸ªç”¨æˆ·äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥ John æ˜¯å¦æ¥è®¿è¿‡ï¼Ÿ</span></span><br><span class="line">alert(visitedSet.has(john)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥ Mary æ˜¯å¦æ¥è®¿è¿‡ï¼Ÿ</span></span><br><span class="line">alert(visitedSet.has(mary)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">john = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// visitedSet å°†è¢«è‡ªåŠ¨æ¸…ç†(å³è‡ªåŠ¨æ¸…é™¤å…¶ä¸­å·²å¤±æ•ˆçš„å€¼ john)</span></span><br></pre></td></tr></table></figure>


<h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5 æ€»ç»“"></a>5 æ€»ç»“</h2><ul>
<li><p>map æ˜¯ä¸€ä¸ªå¸¦æœ‰é”®çš„æ•°æ®çš„é›†åˆã€‚ä¸æ™®é€šçš„å¯¹è±¡ä¸åŒçš„æ˜¯ï¼Œä»–çš„é”®å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ã€‚æœ‰ä¸åŒç»“æ„çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šmap.size</p>
</li>
<li><p>set æ˜¯ä¸€ç»„å”¯ä¸€å€¼çš„é›†åˆã€‚</p>
</li>
<li><p>åœ¨mapå’Œset è¿­ä»£æ€»æ˜¯æŒ‰ç…§æ’å…¥çš„é¡ºåºï¼Œæ‰€ä»¥ä¸èƒ½è¯´ä»–ä»¬çš„å…ƒç´ æ˜¯æ— åºçš„ï¼Œä½†ä¹Ÿä¸èƒ½å¯¹å…ƒç´ é‡æ–°æ’åºï¼Œä¹Ÿä¸èƒ½æŒ‰ç…§ç¼–å·æ¥å–æ•°æ®ã€‚</p>
</li>
<li><p>WeakMap ç±»ä¼¼äºMap ï¼Œä½†æ˜¯åªèƒ½è®¾ç½®é”®ä¸ºå¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡ä¸€æ—¦åœ¨å…¶ä»–åœ°æ–¹æ— æ³•è®¿é—®ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡å°±ä¼šè¢«åƒåœ¾å›æ”¶ï¼Œä¸”WeakMap å¯¹åº”çš„å€¼ä¹Ÿä¼šè¢«åˆ é™¤å›æ”¶ã€‚</p>
</li>
<li><p>WeakSet ç±»ä¼¼äºSetï¼Œä½†æ˜¯åªèƒ½å­˜å‚¨å¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡ä¸€æ—¦åœ¨å…¶ä»–åœ°æ–¹æ— æ³•è®¿é—®ï¼Œé‚£ä¹ˆä¹Ÿä¼šåœ¨WeakSetä¸­åˆ é™¤å›æ”¶ã€‚</p>
</li>
<li><p>WeakMap WeakSet è¢«ç”¨ä½œä¸»è¦å¯¹è±¡å­˜å‚¨ä¹‹å¤–çš„è¾…åŠ©æ•°æ®ç»“æ„ã€‚ä¾‹å¦‚ç¼“å­˜çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
        
<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

        
          <div style="text-align:center;color: #ccc;font-size:14px;">------------- æœ¬æ–‡ç»“æŸ&nbsp;<i class="fe fe-smile"></i>&nbsp;æ„Ÿè°¢æ‚¨çš„é˜…è¯» -------------</div>
        

    </footer>

  </div>

  
  
<nav class="article-nav">
  
  <a href="/2023/02/06/JS%E7%AC%94%E8%AE%B0%E4%B9%8BJS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B(%E5%9B%9B)/" class="article-nav-link">
    <strong class="article-nav-caption">å‰ä¸€ç¯‡</strong>
    <div class="article-nav-title">
      
      JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹(å››)
      
    </div>
  </a>
  
  
  <a href="/2023/02/06/JS%E7%AC%94%E8%AE%B0%E4%B9%8BJS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B(%E5%85%AD)/" class="article-nav-link">
    <strong class="article-nav-caption">åä¸€ç¯‡</strong>
    <div class="article-nav-title">JSç¬”è®°ä¹‹JSæ•°æ®ç±»å‹(å…­)</div>
  </a>
  
</nav>

  

  
  
  
  

</article>
</section>
    <footer class="footer">
  <div class="outer" style="text-align:center">

    <ul class="list-inline">
      <li>ç”±æ¥åŒä¸€æ¢¦ &copy; 2023</li>
      
        <li><a href="https://beian.miit.gov.cn/" target="_blank">è±«ICPå¤‡20008035å·-1</a></li>
      
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>

      <li>theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>

    <br>
    <span>å…¨ç«™å…±<span class="post-count">150.1k</span>å­—</span>
    <br>
    <div class="powered-by">
  
	&emsp;<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">è®¿å®¢æ•°:<span id="busuanzi_value_site_uv"></span></span>&emsp;
  
    <i class="fe fe-bookmark"></i>æ–‡ç« è®¿é—®é‡:<span id="busuanzi_value_page_pv"></span>
  
</div>

    <br>
    <span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("01/01/2019 00:00:00");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´ 
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ "+dnum+" å¤© "; 
        document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’"; 
    } 
	setInterval("createtime()",250);
</script>



  </div>
</footer>
  </main>
  <aside class="sidebar">
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/hexo.svg" alt="ç”±æ¥åŒä¸€æ¢¦"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">é¦–é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">å…³äº</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="æœç´¢">
        <i class="fe fe-search"></i>
        æœç´¢
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/copybtn.js"></script>





<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
  });
</script>



<script src="/js/ocean.js"></script>

</body>

</html>